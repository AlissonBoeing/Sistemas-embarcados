/*
 * ExtInt.cpp
 *
 *  Created on: 03/05/2019
 *      Author: aluno
 */

#include <avr/io.h>
#include "ExtInt.h"

ExtInt * ExtInt::_ExtInt_singletons[8];

uint8_t mask;

ExtInt::ExtInt(INT_ID_t id, ISC_t cfg, CALLBACK_t callback){

	_id = id;

	mask = (_id % 4) << 1;
	disable();

	if(_id<4) {
		EICRA = (EICRA&~(3<<mask)) | (cfg << mask);
	} else {
		EICRB = (EICRB&~(3<<mask)) | (cfg << mask);
	}

	_pCallback = callback;
	_ExtInt_singletons[_id] = this;

}

void ExtInt::enable(){
	EIMSK |= (1 << _id);
}





